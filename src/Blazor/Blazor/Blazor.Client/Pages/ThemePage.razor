
@page "/theme"

@using Blazor.Client.Services

@inject ThemeService ThemeService
@inject IJSRuntime JSRuntime

@rendermode @(new InteractiveWebAssemblyRenderMode(prerender: false))

<h3>ThemePage</h3>

<div class="theme-container @CurrentTheme">
    <p>Exemple : le thème courant est <strong>@CurrentTheme</strong>.</p>

    <button class="btn" @onclick="SetLightTheme">Thème clair</button>
    <button class="btn" @onclick="SetDarkTheme">Thème sombre</button>
</div>

<style>

body[data-theme='dark'] {
        background-color: #1e1e1e;
        color: #ffffff;
}

.theme-container {
    padding: 1rem;
    border-radius: 6px;
    transition: background-color 0.2s ease, color 0.2s ease;
}

/* Thème clair */
.theme-container.light {
    background-color: #ffffff;
    color: #111111;
    border: 1px solid #e5e7eb;
}

/* Thème sombre */
.theme-container.dark {
    background-color: #111111;
    color: #f3f4f6;
    border: 1px solid #2d2d2d;
}

button.btn {
    margin-right: 0.5rem;
    padding: 0.45rem 0.75rem;
    border-radius: 4px;
    border: 1px solid #cfcfcf;
    background: transparent;
    cursor: pointer;
    color: inherit;
}

.theme-container.dark button.btn {
    border-color: #444444;
}
</style>

@code {

    private string? CurrentTheme = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        //CurrentTheme = await ThemeService.GetThemeAsync() ?? "light";
    }

    private async Task SetDocumentTheme(string theme)
    {
        await JSRuntime.InvokeVoidAsync("document.body.setAttribute", "data-theme", theme);
    }

    private async void SetLightTheme()
    {
        CurrentTheme = "light";
        //await ThemeService.SetThemeAsync("light"); 
        //await SetDocumentTheme("light");
    }

    private async void SetDarkTheme()
    {
        CurrentTheme = "dark";
        //await ThemeService.SetThemeAsync("dark");
        //await SetDocumentTheme("dark");
    }
}

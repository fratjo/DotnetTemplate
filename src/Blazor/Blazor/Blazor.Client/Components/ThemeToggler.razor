@using Blazor.Client.Services
@inject ThemeService ThemeService
@implements IDisposable

@rendermode InteractiveAuto

<button class="btn-theme" @onclick="Toggle">
    @(ThemeService.IsDarkMode ? "☀️" : "🌙")
</button>

<style>
    .btn-theme {
        background-color: var(--btn-bg);
        color: var(--text-color);
        border: 1px solid var(--text-color);
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
    }
</style>

@code {
    protected override void OnInitialized()
    {
        ThemeService.OnChange += StateHasChanged;
    }

    private async Task Toggle()
    {
        await ThemeService.ToggleTheme();
    }

    public void Dispose()
    {
        ThemeService.OnChange -= StateHasChanged;
    }
}